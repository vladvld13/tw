<!DOCTYPE html>
<html  lang="ro">
    <head>
        <%- include("../fragmente/head.ejs") %>
        <meta name="keywords" content="telefon, 4sale, forsale, calculator, tableta, carti, reduceri, pret redus, Bucuresti, transport prin curier, oferta, discount"><!--cuvintele cheie ale paginii; majoritatea motoarelor de căutare ignoră keywords -->
        <meta name="description" content="Magazinul 4Sale ofera telefoane, tablete, calculatoare, moda si carti la cele mai bune preturi. Livrare la domiciliu in Bucuresti."><!-- descrierea paginii, adesea apare sub link când sunt afișate rezultatele căutării -->
        <title>4Sale.ro</title>    
        <script type="text/javascript" src=/resurse/js/produse.js></script>
        <script type="text/javascript" src=/resurse/js/produse-cos.js></script>
        <link href="/resurse/css/produse.css" type="text/css" rel="stylesheet" />
        <script type="text/javascript" src=/resurse/js/produse.js></script>

    </head>
    <body>
        <header>
            <h1 id="titlu">Carti</h1>
            <p id="banner"></p>
        </header>

        <main>

            <label>
                <select id="inp-select">
                    <option id="sel-ascendent" selected value="ascendent">ascendent</option>
                    <option id="sel-descendent" selected value="descendent">descendent</option>

                </select>
                <button id="sorteaza">Sorteaza</button> 
            </label>
            <section id="carti">
                <h2>Carti</h2>

                <div class="grid-carti">
                    <% for (let carte of carti) { %>
                        <article class="carte">
                            <h2 class="nume">Nume: <span class="val-nume"><%- carte.titlu %></span></h2>
                            <p class="info-carte">
                                <div class="autor">Autor: <span class="val-autor"><%- carte.autor %></span></div>
                                <div class="an">An: <span class="val-an"><%- carte.an_publicare %></span></div>
                            </p>
                            <p class="gen">Gen: <span class="val-gen"><%- carte.gen %></span></p>

                            <p>Rating:</p>
                    <ul class="rating-list">
                        <% let ratings = carte.rating.split(","); %>
                        <% for (let r of ratings) { %>
                            <li class="rating-item"><%- r.trim() %></li>
                        <% } %>
                    </ul>
                    <% let suma = 0; %>
                    <% for (let s of ratings){ %>
                        <% suma = suma + parseFloat(s)    %>
                        <% } %>
                    <% let mediaRating = (suma / ratings.length).toFixed(2); %>
                    <p class="media-rating">Media rating-urilor: <span class="val-media"><%- mediaRating %></span></p>
                        </article>
                    <% } %>
                </div>
            </section>
        </main>

    <%- include("../fragmente/footer") %>
    </body>
</html>